\hypertarget{iobuffer_8c}{}\doxysection{/home/robert/\+Projects/http\+\_\+in\+\_\+c/http\+\_\+in\+\_\+c/common/iobuffer.c File Reference}
\label{iobuffer_8c}\index{/home/robert/Projects/http\_in\_c/http\_in\_c/common/iobuffer.c@{/home/robert/Projects/http\_in\_c/http\_in\_c/common/iobuffer.c}}
{\ttfamily \#include $<$http\+\_\+in\+\_\+c/common/iobuffer.\+h$>$}\newline
{\ttfamily \#include $<$http\+\_\+in\+\_\+c/common/alloc.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$assert.\+h$>$}\newline
{\ttfamily \#include $<$rbl/check\+\_\+tag.\+h$>$}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structIOBuffer__s}{IOBuffer\+\_\+s}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{iobuffer_8c_ae976d8bd500d247fbe5a92dc5fa3da12}{IOBuffer\+\_\+\+TAG}}~\char`\"{}IOBUFF\char`\"{}
\item 
\#define \mbox{\hyperlink{iobuffer_8c_aa65567e128f14add170accb94a183f5b}{IOB\+\_\+\+TERM\+\_\+\+CHAR}}~(char)0x00;
\item 
\#define \mbox{\hyperlink{iobuffer_8c_a8211ce0ce6c0e2512a37398b23083505}{IOB\+\_\+\+FILL\+\_\+\+CHAR}}~\textquotesingle{}+\textquotesingle{}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structIOBuffer__s}{IOBuffer\+\_\+s}} \mbox{\hyperlink{iobuffer_8c_ad9ea89310f25892e92afab591131dbaf}{IOBuffer}}
\item 
typedef struct \mbox{\hyperlink{structIOBuffer__s}{IOBuffer\+\_\+s}} $\ast$ \mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} \mbox{\hyperlink{group__group__iobuffer_ga7ee96bb6c95938180ce94255b0226b77}{IOBuffer\+\_\+init}} (\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this, int capacity)
\item 
\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} \mbox{\hyperlink{group__group__iobuffer_gabd5fd522d1f5f0392a23fb69f0ee252e}{IOBuffer\+\_\+new\+\_\+with\+\_\+capacity}} (int capacity)
\begin{DoxyCompactList}\small\item\em Create a new IOBuffer with at least the requested capacity in bytes. \end{DoxyCompactList}\item 
\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} \mbox{\hyperlink{group__group__iobuffer_ga46f691db670ded401154174d60e676db}{IOBuffer\+\_\+new}} ()
\begin{DoxyCompactList}\small\item\em Create a new IOBuffer with a a default capacity. \end{DoxyCompactList}\item 
\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} \mbox{\hyperlink{group__group__iobuffer_ga6a1fb2a389fa5d55d4f5ef6c558915aa}{IOBuffer\+\_\+from\+\_\+cbuffer}} (\mbox{\hyperlink{group__group__cbuffer_gaec47cab3b4ddb0a70cdd57c84dd096e4}{Cbuffer\+Ref}} cbuf)
\begin{DoxyCompactList}\small\item\em Makes an IOBuffer from the content of a Cbuffer by COPY. \end{DoxyCompactList}\item 
\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} \mbox{\hyperlink{group__group__iobuffer_gab006c3dae5dc9b9457a7404ddf79de75}{IOBuffer\+\_\+from\+\_\+buf}} (char $\ast$buf, int len)
\begin{DoxyCompactList}\small\item\em Makes an IOBUffer from the a pointer and length by COPY. \end{DoxyCompactList}\item 
\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} \mbox{\hyperlink{group__group__iobuffer_ga6960ab7d507273c6a9c4d5150b16195c}{IOBuffer\+\_\+from\+\_\+cstring}} (char $\ast$cstr)
\begin{DoxyCompactList}\small\item\em Makes an IOBuffer from a c-\/string by COPY. \end{DoxyCompactList}\item 
const char $\ast$ \mbox{\hyperlink{group__group__iobuffer_ga8ef4e2b7d22595e66f4a7beed0c33dce}{IOBuffer\+\_\+cstr}} (\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this)
\begin{DoxyCompactList}\small\item\em Returns a c string ref to internal data. \end{DoxyCompactList}\item 
\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} \mbox{\hyperlink{group__group__iobuffer_gacc0bd2a7d4f31a760c2f57c9337f99fc}{IOBuffer\+\_\+dup}} (\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this)
\begin{DoxyCompactList}\small\item\em Duplicate an IOBuffer including copying the content to a new memory allocation. \end{DoxyCompactList}\item 
\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} $\ast$ \mbox{\hyperlink{group__group__iobuffer_ga2119d52c728825f9a3c8cba79d71dbd5}{IOBuffer\+\_\+data}} (const \mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this)
\begin{DoxyCompactList}\small\item\em Returns a reference pointer to the start of active data in the buffer. The memory pointed into is owned by the Io\+Buffer. Do not free. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__group__iobuffer_ga6edf6065c3450a4302232d4f3948705c}{IOBuffer\+\_\+data\+\_\+len}} (const \mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this)
\begin{DoxyCompactList}\small\item\em Returns a the length of active data in the buffer. \end{DoxyCompactList}\item 
\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} \mbox{\hyperlink{group__group__iobuffer_gac7ff8dfa77edcac8a98a70ca470f168e}{IOBuffer\+\_\+data\+\_\+add}} (\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this, \mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} $\ast$p, int len)
\item 
\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} $\ast$ \mbox{\hyperlink{group__group__iobuffer_ga81bd07791efe1dab37c0b2f5f9db0ca7}{IOBuffer\+\_\+space}} (const \mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this)
\begin{DoxyCompactList}\small\item\em Returns a reference pointer to the start of unused memory space after the last active content in the buffer. This is the start of a memory where more data could be placed. The memory pointed into is owned by the Io\+Buffer. Do not free. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__group__iobuffer_gad559ced27672766eb884a984a4acea20}{IOBuffer\+\_\+space\+\_\+len}} (const \mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this)
\begin{DoxyCompactList}\small\item\em Returns a the length of available space in the buffer after the active data. \end{DoxyCompactList}\item 
\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} \mbox{\hyperlink{group__group__iobuffer_gabacc4c315c65aaf1aba3add49318dc09}{IOBuffer\+\_\+commit}} (\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this, int bytes\+\_\+used)
\begin{DoxyCompactList}\small\item\em Updates the Io\+Buffer so that the bytes\+\_\+used bytes of memory area after the active content is also considered to be active data. The memory addded is not updated as it is expected that data has already been added to that area. \end{DoxyCompactList}\item 
\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} \mbox{\hyperlink{group__group__iobuffer_gad59ba6628847ab2495ac906b480eb92f}{IOBuffer\+\_\+consolidate\+\_\+space}} (\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this)
\begin{DoxyCompactList}\small\item\em Make more space in the buffer. Without changing the overall capacity of the buffer There are two strategies used in this function\+: Strategy 1 -\/ move used area to front of allocated memory When a buffer contains data but no space for new data this operation will move the active data to the front of the allocated memory and relase some memory for space for new data. Strategy 2 -\/ when strategy 1 will not work expand the allocated memory space by doing a realloc. \end{DoxyCompactList}\item 
\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} \mbox{\hyperlink{group__group__iobuffer_gadff18d332fc89d53d2835710db7f62ef}{IOBuffer\+\_\+consume}} (\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this, int byte\+\_\+count)
\begin{DoxyCompactList}\small\item\em Updates the Io\+Buffer so that the first byte\+\_\+count bytes of the active data are now considered not active data. IE Increments the start pointer. \end{DoxyCompactList}\item 
\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} \mbox{\hyperlink{group__group__iobuffer_gabec22bda9fa4e4e077be2667fe7b6743}{IOBuffer\+\_\+destroy}} (\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this)
\item 
\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} \mbox{\hyperlink{group__group__iobuffer_ga3acd7b485e5237f93f1e4f88d8380e68}{IOBuffer\+\_\+reset}} (\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this)
\begin{DoxyCompactList}\small\item\em Set the buffer back to empty without allocating new memory. \end{DoxyCompactList}\item 
\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} \mbox{\hyperlink{group__group__iobuffer_gad61012fc3fd189b4183aa1498dc5d829}{IOBuffer\+\_\+free}} (\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this)
\item 
bool \mbox{\hyperlink{group__group__iobuffer_ga09d0ada7e761acb176159f7b0f4a8d05}{IOBuffer\+\_\+empty}} (\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this)
\begin{DoxyCompactList}\small\item\em Free an IOBuffer and all its associated resources. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{group__group__iobuffer_ga8e11c62c6155a0ff2ef21513a1efbd74}{IOBuffer\+\_\+equal}} (\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} a, \mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} b)
\item 
\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} $\ast$ \mbox{\hyperlink{group__group__iobuffer_ga8c1e245e3e8c6707a6f8526af24285b5}{IOBuffer\+\_\+memptr}} (\mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}} this)
\begin{DoxyCompactList}\small\item\em Get the address of the start of the buffers memory region. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{iobuffer_8c_a8211ce0ce6c0e2512a37398b23083505}\label{iobuffer_8c_a8211ce0ce6c0e2512a37398b23083505}} 
\index{iobuffer.c@{iobuffer.c}!IOB\_FILL\_CHAR@{IOB\_FILL\_CHAR}}
\index{IOB\_FILL\_CHAR@{IOB\_FILL\_CHAR}!iobuffer.c@{iobuffer.c}}
\doxysubsubsection{\texorpdfstring{IOB\_FILL\_CHAR}{IOB\_FILL\_CHAR}}
{\footnotesize\ttfamily \#define IOB\+\_\+\+FILL\+\_\+\+CHAR~\textquotesingle{}+\textquotesingle{}}

\mbox{\Hypertarget{iobuffer_8c_aa65567e128f14add170accb94a183f5b}\label{iobuffer_8c_aa65567e128f14add170accb94a183f5b}} 
\index{iobuffer.c@{iobuffer.c}!IOB\_TERM\_CHAR@{IOB\_TERM\_CHAR}}
\index{IOB\_TERM\_CHAR@{IOB\_TERM\_CHAR}!iobuffer.c@{iobuffer.c}}
\doxysubsubsection{\texorpdfstring{IOB\_TERM\_CHAR}{IOB\_TERM\_CHAR}}
{\footnotesize\ttfamily \#define IOB\+\_\+\+TERM\+\_\+\+CHAR~(char)0x00;}

\mbox{\Hypertarget{iobuffer_8c_ae976d8bd500d247fbe5a92dc5fa3da12}\label{iobuffer_8c_ae976d8bd500d247fbe5a92dc5fa3da12}} 
\index{iobuffer.c@{iobuffer.c}!IOBuffer\_TAG@{IOBuffer\_TAG}}
\index{IOBuffer\_TAG@{IOBuffer\_TAG}!iobuffer.c@{iobuffer.c}}
\doxysubsubsection{\texorpdfstring{IOBuffer\_TAG}{IOBuffer\_TAG}}
{\footnotesize\ttfamily \#define IOBuffer\+\_\+\+TAG~\char`\"{}IOBUFF\char`\"{}}



\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{iobuffer_8c_ad9ea89310f25892e92afab591131dbaf}\label{iobuffer_8c_ad9ea89310f25892e92afab591131dbaf}} 
\index{iobuffer.c@{iobuffer.c}!IOBuffer@{IOBuffer}}
\index{IOBuffer@{IOBuffer}!iobuffer.c@{iobuffer.c}}
\doxysubsubsection{\texorpdfstring{IOBuffer}{IOBuffer}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structIOBuffer__s}{IOBuffer\+\_\+s}} \mbox{\hyperlink{iobuffer_8c_ad9ea89310f25892e92afab591131dbaf}{IOBuffer}}}

\mbox{\Hypertarget{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}\label{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}} 
\index{iobuffer.c@{iobuffer.c}!IOBufferRef@{IOBufferRef}}
\index{IOBufferRef@{IOBufferRef}!iobuffer.c@{iobuffer.c}}
\doxysubsubsection{\texorpdfstring{IOBufferRef}{IOBufferRef}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structIOBuffer__s}{IOBuffer\+\_\+s}} $\ast$ \mbox{\hyperlink{iobuffer_8c_a373e47346d4021180e79668c7afcc0f5}{IOBuffer\+Ref}}}

