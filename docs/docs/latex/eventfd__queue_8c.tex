\hypertarget{eventfd__queue_8c}{}\doxysection{/home/robert/\+Projects/http\+\_\+in\+\_\+c/http\+\_\+in\+\_\+c/runloop/eventfd\+\_\+queue.c File Reference}
\label{eventfd__queue_8c}\index{/home/robert/Projects/http\_in\_c/http\_in\_c/runloop/eventfd\_queue.c@{/home/robert/Projects/http\_in\_c/http\_in\_c/runloop/eventfd\_queue.c}}
{\ttfamily \#include $<$http\+\_\+in\+\_\+c/runloop/runloop.\+h$>$}\newline
{\ttfamily \#include $<$http\+\_\+in\+\_\+c/runloop/rl\+\_\+internal.\+h$>$}\newline
{\ttfamily \#include $<$assert.\+h$>$}\newline
{\ttfamily \#include $<$pthread.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$fcntl.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include $<$sys/eventfd.\+h$>$}\newline
{\ttfamily \#include $<$rbl/logger.\+h$>$}\newline
{\ttfamily \#include $<$http\+\_\+in\+\_\+c/common/list.\+h$>$}\newline
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{rl__internal_8h_a02d37bce2f9fc4a10e1410044e58a1e0}{Eventfd\+Queue}} $\ast$ \mbox{\hyperlink{eventfd__queue_8c_afcb7901f9a0e9c060adab1576bfa7b26}{Evf\+Queue\+Ptr}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} \mbox{\hyperlink{eventfd__queue_8c_a3b68800291218d1a95a479273e5b8136}{dealloc}} (\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} $\ast$$\ast$p)
\item 
static \mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} \mbox{\hyperlink{eventfd__queue_8c_a0a23e34e2daa6e8e31c2268a3cddfbc4}{mk\+\_\+fds}} (\mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}} athis)
\item 
\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} \mbox{\hyperlink{eventfd__queue_8c_ab84b3dab9be5cbfd6be68d1bba641bc8}{Evfdq\+\_\+init}} (\mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}} athis)
\item 
\mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}} \mbox{\hyperlink{eventfd__queue_8c_a8046ae97ac99a0003eda23830281777e}{runloop\+\_\+eventfd\+\_\+queue\+\_\+new}} ()
\item 
\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} \mbox{\hyperlink{eventfd__queue_8c_a86cc8047c3ba718351b25cfe1f30b98a}{runloop\+\_\+eventfd\+\_\+queue\+\_\+free}} (\mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}} athis)
\item 
int \mbox{\hyperlink{eventfd__queue_8c_aeaf223dcfe49e2fc5986d801aa4972a2}{runloop\+\_\+eventfd\+\_\+queue\+\_\+readfd}} (\mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}} athis)
\item 
\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} \mbox{\hyperlink{eventfd__queue_8c_a82b680631af163f86958436b4ab9ca9d}{runloop\+\_\+eventfd\+\_\+queue\+\_\+add}} (\mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}} athis, \mbox{\hyperlink{rl__internal_8h_aeacde1bfd947ad8b6f347ceb6dff16ac}{Functor}} item)
\item 
\mbox{\hyperlink{rl__internal_8h_aeacde1bfd947ad8b6f347ceb6dff16ac}{Functor}} \mbox{\hyperlink{eventfd__queue_8c_a5893ed70f0d3e472d89020651b55eeeb}{runloop\+\_\+eventfd\+\_\+queue\+\_\+remove}} (\mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}} athis)
\end{DoxyCompactItemize}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{eventfd__queue_8c_afcb7901f9a0e9c060adab1576bfa7b26}\label{eventfd__queue_8c_afcb7901f9a0e9c060adab1576bfa7b26}} 
\index{eventfd\_queue.c@{eventfd\_queue.c}!EvfQueuePtr@{EvfQueuePtr}}
\index{EvfQueuePtr@{EvfQueuePtr}!eventfd\_queue.c@{eventfd\_queue.c}}
\doxysubsubsection{\texorpdfstring{EvfQueuePtr}{EvfQueuePtr}}
{\footnotesize\ttfamily typedef \mbox{\hyperlink{rl__internal_8h_a02d37bce2f9fc4a10e1410044e58a1e0}{Eventfd\+Queue}}$\ast$ \mbox{\hyperlink{eventfd__queue_8c_afcb7901f9a0e9c060adab1576bfa7b26}{Evf\+Queue\+Ptr}}}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{eventfd__queue_8c_a3b68800291218d1a95a479273e5b8136}\label{eventfd__queue_8c_a3b68800291218d1a95a479273e5b8136}} 
\index{eventfd\_queue.c@{eventfd\_queue.c}!dealloc@{dealloc}}
\index{dealloc@{dealloc}!eventfd\_queue.c@{eventfd\_queue.c}}
\doxysubsubsection{\texorpdfstring{dealloc()}{dealloc()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} dealloc (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} $\ast$$\ast$}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{eventfd__queue_8c_ab84b3dab9be5cbfd6be68d1bba641bc8}\label{eventfd__queue_8c_ab84b3dab9be5cbfd6be68d1bba641bc8}} 
\index{eventfd\_queue.c@{eventfd\_queue.c}!Evfdq\_init@{Evfdq\_init}}
\index{Evfdq\_init@{Evfdq\_init}!eventfd\_queue.c@{eventfd\_queue.c}}
\doxysubsubsection{\texorpdfstring{Evfdq\_init()}{Evfdq\_init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} Evfdq\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}}}]{athis }\end{DoxyParamCaption})}

\mbox{\Hypertarget{eventfd__queue_8c_a0a23e34e2daa6e8e31c2268a3cddfbc4}\label{eventfd__queue_8c_a0a23e34e2daa6e8e31c2268a3cddfbc4}} 
\index{eventfd\_queue.c@{eventfd\_queue.c}!mk\_fds@{mk\_fds}}
\index{mk\_fds@{mk\_fds}!eventfd\_queue.c@{eventfd\_queue.c}}
\doxysubsubsection{\texorpdfstring{mk\_fds()}{mk\_fds()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} mk\+\_\+fds (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}}}]{athis }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{eventfd__queue_8c_a82b680631af163f86958436b4ab9ca9d}\label{eventfd__queue_8c_a82b680631af163f86958436b4ab9ca9d}} 
\index{eventfd\_queue.c@{eventfd\_queue.c}!runloop\_eventfd\_queue\_add@{runloop\_eventfd\_queue\_add}}
\index{runloop\_eventfd\_queue\_add@{runloop\_eventfd\_queue\_add}!eventfd\_queue.c@{eventfd\_queue.c}}
\doxysubsubsection{\texorpdfstring{runloop\_eventfd\_queue\_add()}{runloop\_eventfd\_queue\_add()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} runloop\+\_\+eventfd\+\_\+queue\+\_\+add (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}}}]{athis,  }\item[{\mbox{\hyperlink{rl__internal_8h_aeacde1bfd947ad8b6f347ceb6dff16ac}{Functor}}}]{item }\end{DoxyParamCaption})}

\mbox{\Hypertarget{eventfd__queue_8c_a86cc8047c3ba718351b25cfe1f30b98a}\label{eventfd__queue_8c_a86cc8047c3ba718351b25cfe1f30b98a}} 
\index{eventfd\_queue.c@{eventfd\_queue.c}!runloop\_eventfd\_queue\_free@{runloop\_eventfd\_queue\_free}}
\index{runloop\_eventfd\_queue\_free@{runloop\_eventfd\_queue\_free}!eventfd\_queue.c@{eventfd\_queue.c}}
\doxysubsubsection{\texorpdfstring{runloop\_eventfd\_queue\_free()}{runloop\_eventfd\_queue\_free()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rl__internal_8h_a691e4d5de4b427a20b12e6a256b5406e}{void}} runloop\+\_\+eventfd\+\_\+queue\+\_\+free (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}}}]{athis }\end{DoxyParamCaption})}

\mbox{\Hypertarget{eventfd__queue_8c_a8046ae97ac99a0003eda23830281777e}\label{eventfd__queue_8c_a8046ae97ac99a0003eda23830281777e}} 
\index{eventfd\_queue.c@{eventfd\_queue.c}!runloop\_eventfd\_queue\_new@{runloop\_eventfd\_queue\_new}}
\index{runloop\_eventfd\_queue\_new@{runloop\_eventfd\_queue\_new}!eventfd\_queue.c@{eventfd\_queue.c}}
\doxysubsubsection{\texorpdfstring{runloop\_eventfd\_queue\_new()}{runloop\_eventfd\_queue\_new()}}
{\footnotesize\ttfamily \mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}} runloop\+\_\+eventfd\+\_\+queue\+\_\+new (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

An eventfd\+\_\+queue is a queue intended between threads where the act of adding an element triggers an epoll eventfd to the receiving thread.

The queue is protected by a condition variable and mutex \mbox{\Hypertarget{eventfd__queue_8c_aeaf223dcfe49e2fc5986d801aa4972a2}\label{eventfd__queue_8c_aeaf223dcfe49e2fc5986d801aa4972a2}} 
\index{eventfd\_queue.c@{eventfd\_queue.c}!runloop\_eventfd\_queue\_readfd@{runloop\_eventfd\_queue\_readfd}}
\index{runloop\_eventfd\_queue\_readfd@{runloop\_eventfd\_queue\_readfd}!eventfd\_queue.c@{eventfd\_queue.c}}
\doxysubsubsection{\texorpdfstring{runloop\_eventfd\_queue\_readfd()}{runloop\_eventfd\_queue\_readfd()}}
{\footnotesize\ttfamily int runloop\+\_\+eventfd\+\_\+queue\+\_\+readfd (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}}}]{athis }\end{DoxyParamCaption})}

\mbox{\Hypertarget{eventfd__queue_8c_a5893ed70f0d3e472d89020651b55eeeb}\label{eventfd__queue_8c_a5893ed70f0d3e472d89020651b55eeeb}} 
\index{eventfd\_queue.c@{eventfd\_queue.c}!runloop\_eventfd\_queue\_remove@{runloop\_eventfd\_queue\_remove}}
\index{runloop\_eventfd\_queue\_remove@{runloop\_eventfd\_queue\_remove}!eventfd\_queue.c@{eventfd\_queue.c}}
\doxysubsubsection{\texorpdfstring{runloop\_eventfd\_queue\_remove()}{runloop\_eventfd\_queue\_remove()}}
{\footnotesize\ttfamily \mbox{\hyperlink{rl__internal_8h_aeacde1bfd947ad8b6f347ceb6dff16ac}{Functor}} runloop\+\_\+eventfd\+\_\+queue\+\_\+remove (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{runloop_8h_a6ef563d6fb5ad8c3212d5f6deb16bf93}{Eventfd\+Queue\+Ref}}}]{athis }\end{DoxyParamCaption})}

